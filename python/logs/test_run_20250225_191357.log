2025-02-25 19:13:57,418 - root - INFO - Starting test run, logging to /Users/nickfox137/Documents/llm-creative-studio/python/tests/../logs/test_run_20250225_191357.log
2025-02-25 19:13:57,915 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'PIL'
2025-02-25 19:13:57,916 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'PIL'
2025-02-25 19:13:57,917 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'cerebras'
2025-02-25 19:13:57,918 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'google.genai'
2025-02-25 19:13:57,918 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'mistralai'
2025-02-25 19:13:57,918 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'together'
2025-02-25 19:13:57,918 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'groq'
2025-02-25 19:13:57,919 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'cohere'
2025-02-25 19:13:57,919 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'ollama'
2025-02-25 19:13:57,919 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'botocore'
2025-02-25 19:13:57,943 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'flaml'
2025-02-25 19:13:57,984 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'matplotlib'
2025-02-25 19:13:57,984 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'llmlingua'
2025-02-25 19:13:58,302 - data_access - INFO - Documents table created (or already exists).
2025-02-25 19:13:58,302 - root - INFO - Database tables created or verified
2025-02-25 19:13:58,302 - root - INFO - ProjectManager initialized
2025-02-25 19:13:58,317 - root - INFO - Running test: test_chat_endpoint
2025-02-25 19:13:58,322 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,323 - root - INFO - Received request: llm_name=claude, message=Hello, Claude!, user_name=Test User, session_id=test-session, project_id=None
2025-02-25 19:13:58,323 - root - INFO - ConversationManager initialized for session test-session
2025-02-25 19:13:58,323 - root - INFO - Created new ConversationManager for session test-session
2025-02-25 19:13:58,326 - root - INFO - Relevant files: []
2025-02-25 19:13:58,326 - root - INFO - Getting response from claude for message: Hello, Claude!...
2025-02-25 19:13:58,329 - httpx - INFO - HTTP Request: POST http://testserver/chat "HTTP/1.1 200 OK"
2025-02-25 19:13:58,329 - root - INFO - Completed test: test_chat_endpoint
2025-02-25 19:13:58,329 - root - INFO - Running test: test_chat_with_project
2025-02-25 19:13:58,330 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,331 - root - INFO - Received request: llm_name=claude, message=Hello, Claude!, user_name=Test User, session_id=test-session, project_id=test-project-id
2025-02-25 19:13:58,331 - root - INFO - ConversationManager initialized for session test-session
2025-02-25 19:13:58,331 - root - INFO - Created new ConversationManager for session test-session
2025-02-25 19:13:58,331 - root - INFO - Loaded 1 characters for project test-project-id
2025-02-25 19:13:58,333 - root - INFO - Relevant files: []
2025-02-25 19:13:58,333 - root - INFO - Getting response from claude for message: Hello, Claude!...
2025-02-25 19:13:58,333 - root - INFO - Saved conversation state for project test-project-id, session test-session
2025-02-25 19:13:58,334 - httpx - INFO - HTTP Request: POST http://testserver/chat "HTTP/1.1 200 OK"
2025-02-25 19:13:58,334 - root - INFO - Completed test: test_chat_with_project
2025-02-25 19:13:58,334 - root - INFO - Running test: test_chat_command
2025-02-25 19:13:58,335 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,335 - root - INFO - Received request: llm_name=system, message=/help, user_name=Test User, session_id=test-session, project_id=None
2025-02-25 19:13:58,335 - root - INFO - ConversationManager initialized for session test-session
2025-02-25 19:13:58,335 - root - INFO - Created new ConversationManager for session test-session
2025-02-25 19:13:58,337 - httpx - INFO - HTTP Request: POST http://testserver/chat "HTTP/1.1 200 OK"
2025-02-25 19:13:58,338 - root - INFO - Completed test: test_chat_command
2025-02-25 19:13:58,338 - root - INFO - Running test: test_conversation_modes_endpoint
2025-02-25 19:13:58,338 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,339 - httpx - INFO - HTTP Request: GET http://testserver/conversation_modes "HTTP/1.1 200 OK"
2025-02-25 19:13:58,339 - root - INFO - Completed test: test_conversation_modes_endpoint
2025-02-25 19:13:58,339 - root - INFO - Running test: test_clear_session_endpoint
2025-02-25 19:13:58,341 - root - INFO - ConversationManager initialized for session test-session
2025-02-25 19:13:58,341 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,342 - root - INFO - Cleared conversation manager for session test-session
2025-02-25 19:13:58,343 - root - INFO - Cleared message history for session test-session
2025-02-25 19:13:58,343 - httpx - INFO - HTTP Request: DELETE http://testserver/sessions/test-session "HTTP/1.1 200 OK"
2025-02-25 19:13:58,343 - root - INFO - Completed test: test_clear_session_endpoint
2025-02-25 19:13:58,343 - root - INFO - Running test: test_restore_session_endpoint
2025-02-25 19:13:58,344 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,344 - root - INFO - ConversationManager initialized for session test-session
2025-02-25 19:13:58,345 - httpx - INFO - HTTP Request: POST http://testserver/sessions/test-project-id/restore/test-session "HTTP/1.1 200 OK"
2025-02-25 19:13:58,345 - root - INFO - Completed test: test_restore_session_endpoint
2025-02-25 19:13:58,345 - root - INFO - Running test: test_list_projects_endpoint
2025-02-25 19:13:58,346 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,346 - httpx - INFO - HTTP Request: GET http://testserver/projects "HTTP/1.1 200 OK"
2025-02-25 19:13:58,347 - root - INFO - Completed test: test_list_projects_endpoint
2025-02-25 19:13:58,347 - root - INFO - Running test: test_create_project_endpoint
2025-02-25 19:13:58,347 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,348 - httpx - INFO - HTTP Request: POST http://testserver/projects "HTTP/1.1 201 Created"
2025-02-25 19:13:58,349 - root - INFO - Completed test: test_create_project_endpoint
2025-02-25 19:13:58,349 - root - INFO - Running test: test_get_project_endpoint
2025-02-25 19:13:58,349 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,350 - httpx - INFO - HTTP Request: GET http://testserver/projects/test-project-id "HTTP/1.1 200 OK"
2025-02-25 19:13:58,350 - root - INFO - Completed test: test_get_project_endpoint
2025-02-25 19:13:58,350 - root - INFO - Running test: test_update_project_endpoint
2025-02-25 19:13:58,351 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,352 - httpx - INFO - HTTP Request: PUT http://testserver/projects/test-project-id "HTTP/1.1 200 OK"
2025-02-25 19:13:58,352 - root - INFO - Completed test: test_update_project_endpoint
2025-02-25 19:13:58,352 - root - INFO - Running test: test_delete_project_endpoint
2025-02-25 19:13:58,353 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,353 - httpx - INFO - HTTP Request: DELETE http://testserver/projects/test-project-id "HTTP/1.1 200 OK"
2025-02-25 19:13:58,353 - root - INFO - Completed test: test_delete_project_endpoint
2025-02-25 19:13:58,353 - root - INFO - Running test: test_add_character_endpoint
2025-02-25 19:13:58,354 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,355 - httpx - INFO - HTTP Request: POST http://testserver/projects/test-project-id/characters "HTTP/1.1 201 Created"
2025-02-25 19:13:58,355 - root - INFO - Completed test: test_add_character_endpoint
2025-02-25 19:13:58,355 - root - INFO - Running test: test_get_project_characters_endpoint
2025-02-25 19:13:58,356 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,356 - httpx - INFO - HTTP Request: GET http://testserver/projects/test-project-id/characters "HTTP/1.1 200 OK"
2025-02-25 19:13:58,357 - root - INFO - Completed test: test_get_project_characters_endpoint
2025-02-25 19:13:58,357 - root - INFO - Running test: test_delete_character_endpoint
2025-02-25 19:13:58,357 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,358 - httpx - INFO - HTTP Request: DELETE http://testserver/projects/test-project-id/characters/test-character-id "HTTP/1.1 200 OK"
2025-02-25 19:13:58,358 - root - INFO - Completed test: test_delete_character_endpoint
2025-02-25 19:13:58,358 - root - INFO - Running test: test_process_message_no_target
2025-02-25 19:13:58,358 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,358 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,358 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,359 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,359 - root - INFO - Completed test: test_process_message_no_target
2025-02-25 19:13:58,359 - root - INFO - Running test: test_process_message_with_target
2025-02-25 19:13:58,359 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,359 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,359 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,359 - root - INFO - Completed test: test_process_message_with_target
2025-02-25 19:13:58,360 - root - INFO - Running test: test_parse_addressing_mention
2025-02-25 19:13:58,360 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,360 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,360 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,360 - root - INFO - Completed test: test_parse_addressing_mention
2025-02-25 19:13:58,360 - root - INFO - Running test: test_parse_addressing_character
2025-02-25 19:13:58,360 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,360 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,361 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,361 - root - INFO - Completed test: test_parse_addressing_character
2025-02-25 19:13:58,361 - root - INFO - Running test: test_get_llm_response
2025-02-25 19:13:58,361 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,361 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,361 - root - INFO - Getting response from claude for message: Hello, Claude!...
2025-02-25 19:13:58,361 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,361 - root - INFO - Completed test: test_get_llm_response
2025-02-25 19:13:58,361 - root - INFO - Running test: test_handle_command_debate
2025-02-25 19:13:58,362 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,362 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,362 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,362 - root - INFO - Completed test: test_handle_command_debate
2025-02-25 19:13:58,362 - root - INFO - Running test: test_handle_command_role
2025-02-25 19:13:58,362 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,362 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,363 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,363 - root - INFO - Completed test: test_handle_command_role
2025-02-25 19:13:58,363 - root - INFO - Running test: test_handle_command_mode
2025-02-25 19:13:58,363 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,363 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,364 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,364 - root - INFO - Completed test: test_handle_command_mode
2025-02-25 19:13:58,364 - root - INFO - Running test: test_handle_command_character
2025-02-25 19:13:58,364 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,364 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,364 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,364 - root - INFO - Completed test: test_handle_command_character
2025-02-25 19:13:58,364 - root - INFO - Running test: test_handle_command_help
2025-02-25 19:13:58,364 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,364 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,365 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,365 - root - INFO - Completed test: test_handle_command_help
2025-02-25 19:13:58,365 - root - INFO - Running test: test_assign_character
2025-02-25 19:13:58,365 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,365 - root - INFO - Completed test: test_assign_character
2025-02-25 19:13:58,365 - root - INFO - Running test: test_assign_role
2025-02-25 19:13:58,365 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,365 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,366 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,366 - root - INFO - Completed test: test_assign_role
2025-02-25 19:13:58,366 - root - INFO - Running test: test_set_conversation_mode
2025-02-25 19:13:58,366 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 19:13:58,366 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,366 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,366 - root - INFO - Completed test: test_set_conversation_mode
2025-02-25 19:13:58,366 - root - INFO - Running test: test_format_context_prompt
2025-02-25 19:13:58,367 - root - INFO - Completed test: test_format_context_prompt
2025-02-25 19:13:58,367 - root - INFO - Running test: test_chatgpt_response_with_context
2025-02-25 19:13:58,367 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:58,391 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'What do you think about this?', 'role': 'user'}, {'content': 'I believe we should consider...', 'role': 'assistant'}, {'content': "Recent conversation context:\nnick asked: What do you think about this?\nChatGPT said: I believe we should consider...\n\nGiven this context, please respond to: What's your take on this?\n\nRemember to acknowledge and reference previous speakers naturally when appropriate.", 'role': 'user'}], 'model': 'gpt-3.5-turbo', 'stream': False}}
2025-02-25 19:13:58,392 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=None socket_options=None
2025-02-25 19:13:58,415 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10bf5f4d0>
2025-02-25 19:13:58,415 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10bea92e0> server_hostname='api.openai.com' timeout=None
2025-02-25 19:13:58,429 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10be76990>
2025-02-25 19:13:58,429 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-25 19:13:58,429 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-25 19:13:58,429 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-25 19:13:58,429 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-25 19:13:58,429 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-25 19:13:59,787 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Feb 2025 18:13:59 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-uz3s0abntruquykvvtxyfagp'), (b'openai-processing-ms', b'1081'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199898'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'30ms'), (b'x-request-id', b'req_a1595e5059858b62d9f2b0fa753954d9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=0gLosqrslaaJtQwz1jCH.Y2j6jTDNSr9TmV5fZuCuiE-1740507239-1.0.1.1-ueHiktZLUeTQL9RZxgITX1gxkpnZqvzNxFUmHcp_ssqyOF32aKBT0nv7ilqIBZ_I2TAdHWMGAUZV_p.ViWQ31A; path=/; expires=Tue, 25-Feb-25 18:43:59 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=_1hZ6xJ5vYlidS2MNWZr0MWwgL06Ey2ut5NsFkbAc5o-1740507239843-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9179ac209f8811ad-MRS'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-25 19:13:59,789 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-25 19:13:59,789 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-25 19:13:59,790 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-25 19:13:59,790 - httpcore.http11 - DEBUG - response_closed.started
2025-02-25 19:13:59,790 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-25 19:13:59,791 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2025-02-25 19:13:59,803 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:59,803 - root - INFO - Completed test: test_chatgpt_response_with_context
2025-02-25 19:13:59,803 - root - INFO - Running test: test_claude_response_with_context
2025-02-25 19:13:59,804 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:13:59,817 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'What do you think about this?'}, {'role': 'assistant', 'content': 'I believe we should consider...'}, {'role': 'user', 'content': 'Recent conversation context:\nnick asked: What do you think about this?\nChatGPT said: I believe we should consider...\n\nGiven this context, please respond to: Can you elaborate on that?\n\nRemember to acknowledge and reference previous speakers naturally when appropriate.'}], 'model': 'claude-3-haiku-20240307'}}
2025-02-25 19:13:59,817 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=None
2025-02-25 19:13:59,827 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10bfc4190>
2025-02-25 19:13:59,827 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10bea95b0> server_hostname='api.anthropic.com' timeout=None
2025-02-25 19:13:59,841 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10bdfec40>
2025-02-25 19:13:59,841 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-25 19:13:59,842 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-25 19:13:59,842 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-25 19:13:59,842 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-25 19:13:59,842 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-25 19:14:00,767 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Feb 2025 18:14:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-02-25T18:14:01Z'), (b'anthropic-ratelimit-input-tokens-limit', b'50000'), (b'anthropic-ratelimit-input-tokens-remaining', b'50000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-02-25T18:14:00Z'), (b'anthropic-ratelimit-output-tokens-limit', b'10000'), (b'anthropic-ratelimit-output-tokens-remaining', b'10000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-02-25T18:14:00Z'), (b'anthropic-ratelimit-tokens-limit', b'60000'), (b'anthropic-ratelimit-tokens-remaining', b'60000'), (b'anthropic-ratelimit-tokens-reset', b'2025-02-25T18:14:00Z'), (b'request-id', b'req_01Sbm3sjn1o1TrR7mE6FUQy7'), (b'anthropic-organization-id', b'3277caa0-8496-4198-9e41-75f3a2e75fb0'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9179ac297f46e159-MRS'), (b'Content-Encoding', b'gzip')])
2025-02-25 19:14:00,768 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-02-25 19:14:00,769 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-25 19:14:00,769 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-25 19:14:00,770 - httpcore.http11 - DEBUG - response_closed.started
2025-02-25 19:14:00,770 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-25 19:14:00,770 - anthropic._base_client - DEBUG - HTTP Request: POST https://api.anthropic.com/v1/messages "200 OK"
2025-02-25 19:14:00,778 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:14:00,778 - root - INFO - Completed test: test_claude_response_with_context
2025-02-25 19:14:00,778 - root - INFO - Running test: test_gemini_response_with_context
2025-02-25 19:14:00,778 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:14:00,780 - grpc._cython.cygrpc - DEBUG - Using AsyncIOEngine.POLLER as I/O engine
2025-02-25 19:14:00,785 - httpcore.connection - DEBUG - close.started
2025-02-25 19:14:00,785 - httpcore.connection - DEBUG - close.failed exception=RuntimeError('Event loop is closed')
2025-02-25 19:14:00,785 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-88' coro=<AsyncClient.aclose() done, defined at /Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpx/_client.py:1978> exception=RuntimeError('Event loop is closed')>
Traceback (most recent call last):
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpx/_client.py", line 1985, in aclose
    await self._transport.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpx/_transports/default.py", line 406, in aclose
    await self._pool.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 353, in aclose
    await self._close_connections(closing_connections)
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 345, in _close_connections
    await connection.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpcore/_async/connection.py", line 173, in aclose
    await self._connection.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/anyio/streams/tls.py", line 201, in aclose
    await self.transport_stream.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 1306, in aclose
    self._transport.close()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/selector_events.py", line 1205, in close
    super().close()
    ~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/selector_events.py", line 865, in close
    self._loop.call_soon(self._call_connection_lost, None)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 833, in call_soon
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed
2025-02-25 19:14:01,834 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 19:14:01,837 - root - INFO - Completed test: test_gemini_response_with_context
2025-02-25 19:14:01,837 - root - INFO - Running test: test_create_project
2025-02-25 19:14:01,842 - root - INFO - Database tables created or verified
2025-02-25 19:14:01,842 - root - INFO - ProjectManager initialized
2025-02-25 19:14:01,843 - root - INFO - Created project: Test Project (ID: 8301123a-a37f-453a-86a8-c52eb1241db9)
2025-02-25 19:14:01,843 - root - INFO - Completed test: test_create_project
2025-02-25 19:14:01,844 - root - INFO - Running test: test_list_projects
2025-02-25 19:14:01,846 - root - INFO - Database tables created or verified
2025-02-25 19:14:01,846 - root - INFO - ProjectManager initialized
2025-02-25 19:14:01,846 - root - INFO - Created project: Project 1 (ID: 465a73f7-8a97-4f66-8e65-62017df1fe37)
2025-02-25 19:14:01,847 - root - INFO - Created project: Project 2 (ID: 4539f389-515d-4ba6-ae7f-e8430e8ca75a)
2025-02-25 19:14:01,848 - root - INFO - Completed test: test_list_projects
2025-02-25 19:14:01,848 - root - INFO - Running test: test_update_project
2025-02-25 19:14:01,851 - root - INFO - Database tables created or verified
2025-02-25 19:14:01,851 - root - INFO - ProjectManager initialized
2025-02-25 19:14:01,852 - root - INFO - Created project: Original Name (ID: 65eb8197-966f-4a28-b282-bf3f5ac8f09a)
2025-02-25 19:14:01,852 - root - INFO - Updated project 65eb8197-966f-4a28-b282-bf3f5ac8f09a
2025-02-25 19:14:01,853 - root - INFO - Completed test: test_update_project
2025-02-25 19:14:01,853 - root - INFO - Running test: test_delete_project
2025-02-25 19:14:01,855 - root - INFO - Database tables created or verified
2025-02-25 19:14:01,855 - root - INFO - ProjectManager initialized
2025-02-25 19:14:01,856 - root - INFO - Created project: Project to Delete (ID: 661de142-3c6f-4d53-9122-f1a3d683c78f)
2025-02-25 19:14:01,856 - root - INFO - Added character Test Character to project 661de142-3c6f-4d53-9122-f1a3d683c78f
2025-02-25 19:14:01,857 - root - INFO - Deleted project 661de142-3c6f-4d53-9122-f1a3d683c78f
2025-02-25 19:14:01,857 - root - INFO - Completed test: test_delete_project
2025-02-25 19:14:01,857 - root - INFO - Running test: test_add_character
2025-02-25 19:14:01,859 - root - INFO - Database tables created or verified
2025-02-25 19:14:01,859 - root - INFO - ProjectManager initialized
2025-02-25 19:14:01,859 - root - INFO - Created project: Character Test Project (ID: dde56386-e193-42ca-813c-99575d8d8e72)
2025-02-25 19:14:01,859 - root - INFO - Added character John Lennon to project dde56386-e193-42ca-813c-99575d8d8e72
2025-02-25 19:14:01,860 - root - INFO - Completed test: test_add_character
2025-02-25 19:14:01,860 - root - INFO - Running test: test_delete_character
2025-02-25 19:14:01,862 - root - INFO - Database tables created or verified
2025-02-25 19:14:01,862 - root - INFO - ProjectManager initialized
2025-02-25 19:14:01,862 - root - INFO - Created project: Character Delete Test (ID: 29473bea-9c4b-4a94-afe9-e03b54294865)
2025-02-25 19:14:01,862 - root - INFO - Added character Paul McCartney to project 29473bea-9c4b-4a94-afe9-e03b54294865
2025-02-25 19:14:01,863 - root - INFO - Deleted character 99f31982-497d-43fc-9d66-6ad269f844d3
2025-02-25 19:14:01,863 - root - INFO - Completed test: test_delete_character
2025-02-25 19:14:01,863 - root - INFO - Running test: test_add_project_file
2025-02-25 19:14:01,865 - root - INFO - Database tables created or verified
2025-02-25 19:14:01,865 - root - INFO - ProjectManager initialized
2025-02-25 19:14:01,865 - root - INFO - Created project: File Test Project (ID: 83184fac-7f84-4456-976b-0168bdc30bc6)
2025-02-25 19:14:01,866 - root - INFO - Added file test.pdf to project 83184fac-7f84-4456-976b-0168bdc30bc6
2025-02-25 19:14:01,866 - root - INFO - Completed test: test_add_project_file
2025-02-25 19:14:01,866 - root - INFO - Running test: test_delete_project_file
2025-02-25 19:14:01,868 - root - INFO - Database tables created or verified
2025-02-25 19:14:01,868 - root - INFO - ProjectManager initialized
2025-02-25 19:14:01,868 - root - INFO - Created project: File Delete Test (ID: 8d32af55-5631-4fdb-a4c5-bcff92c98bdb)
2025-02-25 19:14:01,869 - root - INFO - Added file delete_me.pdf to project 8d32af55-5631-4fdb-a4c5-bcff92c98bdb
2025-02-25 19:14:01,869 - root - INFO - Deleted file 2c28add7-cbfd-4450-8ca1-4ef7f3765502 from project 8d32af55-5631-4fdb-a4c5-bcff92c98bdb
2025-02-25 19:14:01,870 - root - INFO - Completed test: test_delete_project_file
2025-02-25 19:14:01,870 - root - INFO - Running test: test_save_and_load_session
2025-02-25 19:14:01,872 - root - INFO - Database tables created or verified
2025-02-25 19:14:01,872 - root - INFO - ProjectManager initialized
2025-02-25 19:14:01,872 - root - INFO - Created project: Session Test (ID: 3ac4600f-df0e-41af-89ed-3735b290b492)
2025-02-25 19:14:01,873 - root - INFO - Saved session test_session_id for project 3ac4600f-df0e-41af-89ed-3735b290b492
2025-02-25 19:14:01,873 - root - INFO - Completed test: test_save_and_load_session
2025-02-25 19:14:01,873 - root - INFO - Running test: test_delete_session
2025-02-25 19:14:01,875 - root - INFO - Database tables created or verified
2025-02-25 19:14:01,875 - root - INFO - ProjectManager initialized
2025-02-25 19:14:01,876 - root - INFO - Created project: Session Delete Test (ID: b6431fda-cbc3-454f-abc4-ba67def97133)
2025-02-25 19:14:01,876 - root - INFO - Saved session delete_session_id for project b6431fda-cbc3-454f-abc4-ba67def97133
2025-02-25 19:14:01,876 - root - INFO - Deleted session delete_session_id
2025-02-25 19:14:01,877 - root - INFO - Completed test: test_delete_session
