2025-02-25 18:59:15,031 - root - INFO - Starting test run, logging to /Users/nickfox137/Documents/llm-creative-studio/python/tests/../logs/test_run_20250225_185915.log
2025-02-25 18:59:15,539 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'PIL'
2025-02-25 18:59:15,539 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'PIL'
2025-02-25 18:59:15,541 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'cerebras'
2025-02-25 18:59:15,541 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'google.genai'
2025-02-25 18:59:15,542 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'mistralai'
2025-02-25 18:59:15,542 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'together'
2025-02-25 18:59:15,542 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'groq'
2025-02-25 18:59:15,542 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'cohere'
2025-02-25 18:59:15,542 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'ollama'
2025-02-25 18:59:15,542 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'botocore'
2025-02-25 18:59:15,567 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'flaml'
2025-02-25 18:59:15,608 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'matplotlib'
2025-02-25 18:59:15,609 - autogen.import_utils - DEBUG - Ignoring ImportError: No module named 'llmlingua'
2025-02-25 18:59:15,924 - data_access - INFO - Documents table created (or already exists).
2025-02-25 18:59:15,924 - root - INFO - Database tables created or verified
2025-02-25 18:59:15,924 - root - INFO - ProjectManager initialized
2025-02-25 18:59:15,942 - root - INFO - Running test: test_chat_endpoint
2025-02-25 18:59:15,948 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,948 - root - INFO - Received request: llm_name=claude, message=Hello, Claude!, user_name=Test User, session_id=test-session, project_id=None
2025-02-25 18:59:15,948 - root - INFO - ConversationManager initialized for session test-session
2025-02-25 18:59:15,948 - root - INFO - Created new ConversationManager for session test-session
2025-02-25 18:59:15,953 - root - INFO - Relevant files: []
2025-02-25 18:59:15,953 - root - INFO - Getting response from claude for message: Hello, Claude!...
2025-02-25 18:59:15,956 - httpx - INFO - HTTP Request: POST http://testserver/chat "HTTP/1.1 200 OK"
2025-02-25 18:59:15,956 - root - INFO - Completed test: test_chat_endpoint
2025-02-25 18:59:15,956 - root - INFO - Running test: test_chat_with_project
2025-02-25 18:59:15,958 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,958 - root - INFO - Received request: llm_name=claude, message=Hello, Claude!, user_name=Test User, session_id=test-session, project_id=test-project-id
2025-02-25 18:59:15,958 - root - INFO - ConversationManager initialized for session test-session
2025-02-25 18:59:15,958 - root - INFO - Created new ConversationManager for session test-session
2025-02-25 18:59:15,958 - root - INFO - Loaded 1 characters for project test-project-id
2025-02-25 18:59:15,960 - root - INFO - Relevant files: []
2025-02-25 18:59:15,960 - root - INFO - Getting response from claude for message: Hello, Claude!...
2025-02-25 18:59:15,961 - root - INFO - Saved conversation state for project test-project-id, session test-session
2025-02-25 18:59:15,961 - httpx - INFO - HTTP Request: POST http://testserver/chat "HTTP/1.1 200 OK"
2025-02-25 18:59:15,961 - root - INFO - Completed test: test_chat_with_project
2025-02-25 18:59:15,961 - root - INFO - Running test: test_chat_command
2025-02-25 18:59:15,962 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,963 - root - INFO - Received request: llm_name=system, message=/help, user_name=Test User, session_id=test-session, project_id=None
2025-02-25 18:59:15,963 - root - INFO - ConversationManager initialized for session test-session
2025-02-25 18:59:15,963 - root - INFO - Created new ConversationManager for session test-session
2025-02-25 18:59:15,966 - httpx - INFO - HTTP Request: POST http://testserver/chat "HTTP/1.1 200 OK"
2025-02-25 18:59:15,966 - root - INFO - Completed test: test_chat_command
2025-02-25 18:59:15,966 - root - INFO - Running test: test_conversation_modes_endpoint
2025-02-25 18:59:15,967 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,968 - httpx - INFO - HTTP Request: GET http://testserver/conversation_modes "HTTP/1.1 200 OK"
2025-02-25 18:59:15,968 - root - INFO - Completed test: test_conversation_modes_endpoint
2025-02-25 18:59:15,968 - root - INFO - Running test: test_clear_session_endpoint
2025-02-25 18:59:15,971 - root - INFO - ConversationManager initialized for session test-session
2025-02-25 18:59:15,971 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,971 - root - INFO - Cleared conversation manager for session test-session
2025-02-25 18:59:15,973 - root - INFO - Cleared message history for session test-session
2025-02-25 18:59:15,973 - httpx - INFO - HTTP Request: DELETE http://testserver/sessions/test-session "HTTP/1.1 200 OK"
2025-02-25 18:59:15,973 - root - INFO - Completed test: test_clear_session_endpoint
2025-02-25 18:59:15,973 - root - INFO - Running test: test_restore_session_endpoint
2025-02-25 18:59:15,974 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,974 - root - INFO - ConversationManager initialized for session test-session
2025-02-25 18:59:15,975 - httpx - INFO - HTTP Request: POST http://testserver/sessions/test-project-id/restore/test-session "HTTP/1.1 200 OK"
2025-02-25 18:59:15,975 - root - INFO - Completed test: test_restore_session_endpoint
2025-02-25 18:59:15,975 - root - INFO - Running test: test_list_projects_endpoint
2025-02-25 18:59:15,976 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,976 - httpx - INFO - HTTP Request: GET http://testserver/projects "HTTP/1.1 200 OK"
2025-02-25 18:59:15,977 - root - INFO - Completed test: test_list_projects_endpoint
2025-02-25 18:59:15,977 - root - INFO - Running test: test_create_project_endpoint
2025-02-25 18:59:15,977 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,978 - httpx - INFO - HTTP Request: POST http://testserver/projects "HTTP/1.1 201 Created"
2025-02-25 18:59:15,979 - root - INFO - Completed test: test_create_project_endpoint
2025-02-25 18:59:15,979 - root - INFO - Running test: test_get_project_endpoint
2025-02-25 18:59:15,980 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,980 - httpx - INFO - HTTP Request: GET http://testserver/projects/test-project-id "HTTP/1.1 200 OK"
2025-02-25 18:59:15,980 - root - INFO - Completed test: test_get_project_endpoint
2025-02-25 18:59:15,980 - root - INFO - Running test: test_update_project_endpoint
2025-02-25 18:59:15,981 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,982 - httpx - INFO - HTTP Request: PUT http://testserver/projects/test-project-id "HTTP/1.1 200 OK"
2025-02-25 18:59:15,982 - root - INFO - Completed test: test_update_project_endpoint
2025-02-25 18:59:15,982 - root - INFO - Running test: test_delete_project_endpoint
2025-02-25 18:59:15,983 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,984 - httpx - INFO - HTTP Request: DELETE http://testserver/projects/test-project-id "HTTP/1.1 200 OK"
2025-02-25 18:59:15,984 - root - INFO - Completed test: test_delete_project_endpoint
2025-02-25 18:59:15,984 - root - INFO - Running test: test_add_character_endpoint
2025-02-25 18:59:15,985 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,985 - httpx - INFO - HTTP Request: POST http://testserver/projects/test-project-id/characters "HTTP/1.1 201 Created"
2025-02-25 18:59:15,986 - root - INFO - Completed test: test_add_character_endpoint
2025-02-25 18:59:15,986 - root - INFO - Running test: test_get_project_characters_endpoint
2025-02-25 18:59:15,987 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,987 - httpx - INFO - HTTP Request: GET http://testserver/projects/test-project-id/characters "HTTP/1.1 200 OK"
2025-02-25 18:59:15,987 - root - INFO - Completed test: test_get_project_characters_endpoint
2025-02-25 18:59:15,987 - root - INFO - Running test: test_delete_character_endpoint
2025-02-25 18:59:15,988 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,989 - httpx - INFO - HTTP Request: DELETE http://testserver/projects/test-project-id/characters/test-character-id "HTTP/1.1 200 OK"
2025-02-25 18:59:15,989 - root - INFO - Completed test: test_delete_character_endpoint
2025-02-25 18:59:15,989 - root - INFO - Running test: test_process_message_no_target
2025-02-25 18:59:15,989 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,989 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,989 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,990 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,990 - root - INFO - Completed test: test_process_message_no_target
2025-02-25 18:59:15,990 - root - INFO - Running test: test_process_message_with_target
2025-02-25 18:59:15,990 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,990 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,991 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,991 - root - INFO - Completed test: test_process_message_with_target
2025-02-25 18:59:15,991 - root - INFO - Running test: test_parse_addressing_mention
2025-02-25 18:59:15,991 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,991 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,991 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,991 - root - INFO - Completed test: test_parse_addressing_mention
2025-02-25 18:59:15,991 - root - INFO - Running test: test_parse_addressing_character
2025-02-25 18:59:15,991 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,991 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,992 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,992 - root - INFO - Completed test: test_parse_addressing_character
2025-02-25 18:59:15,992 - root - INFO - Running test: test_get_llm_response
2025-02-25 18:59:15,992 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,992 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,992 - root - INFO - Getting response from claude for message: Hello, Claude!...
2025-02-25 18:59:15,993 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,993 - root - INFO - Completed test: test_get_llm_response
2025-02-25 18:59:15,993 - root - INFO - Running test: test_handle_command_debate
2025-02-25 18:59:15,993 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,993 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,993 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,994 - root - INFO - Completed test: test_handle_command_debate
2025-02-25 18:59:15,994 - root - INFO - Running test: test_handle_command_role
2025-02-25 18:59:15,994 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,994 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,994 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,994 - root - INFO - Completed test: test_handle_command_role
2025-02-25 18:59:15,994 - root - INFO - Running test: test_handle_command_mode
2025-02-25 18:59:15,995 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,995 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,995 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,995 - root - INFO - Completed test: test_handle_command_mode
2025-02-25 18:59:15,995 - root - INFO - Running test: test_handle_command_character
2025-02-25 18:59:15,995 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,996 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,996 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,996 - root - INFO - Completed test: test_handle_command_character
2025-02-25 18:59:15,996 - root - INFO - Running test: test_handle_command_help
2025-02-25 18:59:15,996 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,996 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,997 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,997 - root - INFO - Completed test: test_handle_command_help
2025-02-25 18:59:15,997 - root - INFO - Running test: test_assign_character
2025-02-25 18:59:15,997 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,997 - root - INFO - Completed test: test_assign_character
2025-02-25 18:59:15,997 - root - INFO - Running test: test_assign_role
2025-02-25 18:59:15,997 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,998 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,998 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,998 - root - INFO - Completed test: test_assign_role
2025-02-25 18:59:15,998 - root - INFO - Running test: test_set_conversation_mode
2025-02-25 18:59:15,998 - root - INFO - ConversationManager initialized for session test_session
2025-02-25 18:59:15,998 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,999 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:15,999 - root - INFO - Completed test: test_set_conversation_mode
2025-02-25 18:59:15,999 - root - INFO - Running test: test_format_context_prompt
2025-02-25 18:59:15,999 - root - INFO - Completed test: test_format_context_prompt
2025-02-25 18:59:15,999 - root - INFO - Running test: test_chatgpt_response_with_context
2025-02-25 18:59:15,999 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:16,027 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'What do you think about this?', 'role': 'user'}, {'content': 'I believe we should consider...', 'role': 'assistant'}, {'content': "Recent conversation context:\nnick asked: What do you think about this?\nChatGPT said: I believe we should consider...\n\nGiven this context, please respond to: What's your take on this?\n\nRemember to acknowledge and reference previous speakers naturally when appropriate.", 'role': 'user'}], 'model': 'gpt-3.5-turbo', 'stream': False}}
2025-02-25 18:59:16,028 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=None socket_options=None
2025-02-25 18:59:16,056 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11845b230>
2025-02-25 18:59:16,056 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1183a92e0> server_hostname='api.openai.com' timeout=None
2025-02-25 18:59:16,066 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x118376990>
2025-02-25 18:59:16,066 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-25 18:59:16,066 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-25 18:59:16,066 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-25 18:59:16,066 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-25 18:59:16,066 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-25 18:59:16,837 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Feb 2025 17:59:16 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-uz3s0abntruquykvvtxyfagp'), (b'openai-processing-ms', b'386'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199898'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'30ms'), (b'x-request-id', b'req_aa1d816fd61f61b1d1dd10305c6b62e1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=kBa8sGji6RrwMGrZ7wGXO3TsafNMFnDXImMuFSFsbD4-1740506356-1.0.1.1-04yPfNdrQWywmvnU38SxeQabBrO6y.kr4Xy4a0mf.c0U7WF0l_mwM2QYEXM1vJxzK2dw6HUAlj6aR9l6s1Q0fA; path=/; expires=Tue, 25-Feb-25 18:29:16 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=5IC3Mv7l.4L3RvvN0uAlLYC6JOGlyvvHSEEPeUjjTSw-1740506356885-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'91799695cae0e6f0-MRS'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-02-25 18:59:16,838 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-25 18:59:16,839 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-25 18:59:16,840 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-25 18:59:16,840 - httpcore.http11 - DEBUG - response_closed.started
2025-02-25 18:59:16,840 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-25 18:59:16,841 - openai._base_client - DEBUG - HTTP Request: POST https://api.openai.com/v1/chat/completions "200 OK"
2025-02-25 18:59:16,849 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:16,849 - root - INFO - Completed test: test_chatgpt_response_with_context
2025-02-25 18:59:16,849 - root - INFO - Running test: test_claude_response_with_context
2025-02-25 18:59:16,849 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:16,857 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'What do you think about this?'}, {'role': 'assistant', 'content': 'I believe we should consider...'}, {'role': 'user', 'content': 'Recent conversation context:\nnick asked: What do you think about this?\nChatGPT said: I believe we should consider...\n\nGiven this context, please respond to: Can you elaborate on that?\n\nRemember to acknowledge and reference previous speakers naturally when appropriate.'}], 'model': 'claude-3-haiku-20240307'}}
2025-02-25 18:59:16,857 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=None
2025-02-25 18:59:16,895 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1184c0190>
2025-02-25 18:59:16,895 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1183a95b0> server_hostname='api.anthropic.com' timeout=None
2025-02-25 18:59:16,907 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1180fec40>
2025-02-25 18:59:16,907 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-25 18:59:16,907 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-25 18:59:16,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-25 18:59:16,907 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-25 18:59:16,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-25 18:59:18,622 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 25 Feb 2025 17:59:18 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-02-25T17:59:18Z'), (b'anthropic-ratelimit-input-tokens-limit', b'50000'), (b'anthropic-ratelimit-input-tokens-remaining', b'50000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-02-25T17:59:17Z'), (b'anthropic-ratelimit-output-tokens-limit', b'10000'), (b'anthropic-ratelimit-output-tokens-remaining', b'10000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-02-25T17:59:18Z'), (b'anthropic-ratelimit-tokens-limit', b'60000'), (b'anthropic-ratelimit-tokens-remaining', b'60000'), (b'anthropic-ratelimit-tokens-reset', b'2025-02-25T17:59:17Z'), (b'request-id', b'req_01VexhwLzwDBpftNqodx5K2n'), (b'anthropic-organization-id', b'3277caa0-8496-4198-9e41-75f3a2e75fb0'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9179969b0959e16a-MRS'), (b'Content-Encoding', b'gzip')])
2025-02-25 18:59:18,624 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-02-25 18:59:18,625 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-25 18:59:18,626 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-25 18:59:18,626 - httpcore.http11 - DEBUG - response_closed.started
2025-02-25 18:59:18,626 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-25 18:59:18,627 - anthropic._base_client - DEBUG - HTTP Request: POST https://api.anthropic.com/v1/messages "200 OK"
2025-02-25 18:59:18,634 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:18,635 - root - INFO - Completed test: test_claude_response_with_context
2025-02-25 18:59:18,635 - root - INFO - Running test: test_gemini_response_with_context
2025-02-25 18:59:18,635 - asyncio - DEBUG - Using selector: KqueueSelector
2025-02-25 18:59:18,637 - grpc._cython.cygrpc - DEBUG - Using AsyncIOEngine.POLLER as I/O engine
2025-02-25 18:59:18,642 - httpcore.connection - DEBUG - close.started
2025-02-25 18:59:18,642 - httpcore.connection - DEBUG - close.failed exception=RuntimeError('Event loop is closed')
2025-02-25 18:59:18,642 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-88' coro=<AsyncClient.aclose() done, defined at /Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpx/_client.py:1978> exception=RuntimeError('Event loop is closed')>
Traceback (most recent call last):
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpx/_client.py", line 1985, in aclose
    await self._transport.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpx/_transports/default.py", line 406, in aclose
    await self._pool.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 353, in aclose
    await self._close_connections(closing_connections)
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 345, in _close_connections
    await connection.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpcore/_async/connection.py", line 173, in aclose
    await self._connection.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/anyio/streams/tls.py", line 201, in aclose
    await self.transport_stream.aclose()
  File "/Users/nickfox137/Documents/llm-creative-studio/python/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 1306, in aclose
    self._transport.close()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/selector_events.py", line 1205, in close
    super().close()
    ~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/selector_events.py", line 865, in close
    self._loop.call_soon(self._call_connection_lost, None)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 833, in call_soon
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed
2025-02-25 18:59:18,864 - root - ERROR - Gemini API Error: 404 models/gemini-pro is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-02-25 18:59:18,954 - root - ERROR - Test failed: test_gemini_response_with_context
2025-02-25 18:59:18,954 - root - ERROR - Error: <ExceptionInfo HTTPException(status_code=500, detail='Gemini API Error: 404 models/gemini-pro is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.') tblen=33>
2025-02-25 18:59:18,954 - root - INFO - Completed test: test_gemini_response_with_context
2025-02-25 18:59:18,960 - asyncio - DEBUG - Using selector: KqueueSelector
